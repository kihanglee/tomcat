<?xml version="1.0" encoding="utf-8"?>
<domain xmlns="http://www.tmaxsoft.com/xml/ns/jeus" version="8.0">
    <production-mode>true</production-mode>
    <id>20180918</id>
	<admin-server-name>%SERVERNAME%</admin-server-name>
    <security-manager>
        <default-application-domain>SYSTEM_DOMAIN</default-application-domain>
        <security-domains>
            <security-domain>
                <name>SYSTEM_DOMAIN</name>
            </security-domain>
        </security-domains>
    </security-manager>
    <domain-log-home>logs</domain-log-home>
    <system-clustering-framework>
        <heartbeat-address>230.30.1.1</heartbeat-address>
        <heartbeat-port>3030</heartbeat-port>
        <use-virtual-multicast>false</use-virtual-multicast>
        <leader-discovery-timeout>5000</leader-discovery-timeout>
        <failure-detection-timeout>7000</failure-detection-timeout>
        <failure-verification-timeout>15000</failure-verification-timeout>
        <max-thread-pool-size>5</max-thread-pool-size>
        <min-thread-pool-size>5</min-thread-pool-size>
    </system-clustering-framework>
    <servers>
        <server>
            <name>%SERVERNAME%</name>
            <jvm-config>
                <jvm-option>-Xms1024m -Xmx1024m</jvm-option>
            </jvm-config>
            <class-ftp>true</class-ftp>
            <listeners>
                <base>base</base>
                <listener>
                    <name>base</name>
                    <listen-port>%BASE_PORT%</listen-port>
                    <listen-address>%BASE_ADDRESS%</listen-address>
                </listener>
                <listener>
                    <name>http-server</name>
                    <listen-port>%HTTP_PORT%</listen-port>
                    <listen-address>%BASE_ADDRESS%</listen-address>
                    <keep-alive-timeout>600000</keep-alive-timeout>
                </listener>
            </listeners>
            <web-engine>
                <blocked-url-patterns>
                    <deny-last-space-character>true</deny-last-space-character>
                    <deny-null-character>true</deny-null-character>
                    <encoded-pattern>%00</encoded-pattern>
                    <encoded-pattern>%23</encoded-pattern>
                    <encoded-pattern>%2e</encoded-pattern>
                    <encoded-pattern>%2f</encoded-pattern>
                    <encoded-pattern>%5c</encoded-pattern>
                    <decoded-pattern>#</decoded-pattern>
                    <decoded-pattern>\</decoded-pattern>
                </blocked-url-patterns>
                <web-connections>
                    <http-listener>
                        <name>http</name>
                        <server-listener-ref>http-server</server-listener-ref>
                        <thread-pool>
                            <min>%HTTP_THREAD_MIN%</min>
                            <max>%HTTP_THREAD_MAX%</max>
                        </thread-pool>
                    </http-listener>
                </web-connections>
            </web-engine>
            <jms-engine>
                <service-config>
                    <name>default</name>
                    <listener-name>jms</listener-name>
                    <client-limit>1000</client-limit>
                    <client-keepalive-timeout>20</client-keepalive-timeout>
                </service-config>
                <thread-pool>
                    <min>10</min>
                    <max>20</max>
                </thread-pool>
                <connection-factory>
                    <type>nonxa</type>
                    <name>ConnectionFactory</name>
                </connection-factory>
                <connection-factory>
                    <type>xa</type>
                    <name>XAConnectionFactory</name>
                </connection-factory>
            </jms-engine>
            <jms-resource>
                <destination>
                    <type>queue</type>
                    <name>ExamplesQueue</name>
                </destination>
                <destination>
                    <type>topic</type>
                    <name>ExamplesTopic</name>
                </destination>
            </jms-resource>
            <system-logging>
                <name>jeus</name>
                <level>FINER</level>
                <handler>
                    <file-handler>
                        <name>fileHandler</name>
                        <valid-day>1</valid-day>
                    </file-handler>
                </handler>
            </system-logging>
        </server>
    </servers>
    <session-cluster>
        <cluster-mode>DOMAIN_WIDE</cluster-mode>
        <session-manager-provider>RUNTIME</session-manager-provider>
        <exclude-das-in-cluster>false</exclude-das-in-cluster>
        <sticky-encoding-rule>BASE64</sticky-encoding-rule>
        <common-cluster-config>
            <reserved-thread-num>0</reserved-thread-num>
            <connect-timeout>5000</connect-timeout>
            <read-timeout>20000</read-timeout>
            <allow-fail-back>true</allow-fail-back>
            <backup-level>access</backup-level>
            <backup-unit-size>50</backup-unit-size>
            <backup-queue-size>20</backup-queue-size>
            <ignore-flow-control>false</ignore-flow-control>
            <prevent-migration>false</prevent-migration>
            <failover-delay>0</failover-delay>
            <restart-delay>0</restart-delay>
            <passivation>
                <trigger>
                    <timeout>-1</timeout>
                    <count-threshold>-1</count-threshold>
                    <memory-threshold>-1</memory-threshold>
                </trigger>
                <single-folder-file-limit>10000</single-folder-file-limit>
                <min-hole>100</min-hole>
                <packing-rate>0.5</packing-rate>
                <ratio>0.7</ratio>
            </passivation>
        </common-cluster-config>
    </session-cluster>
    <deployed-applications>
	    <!--
	                 <deployed-application>
            <id>%APP_NAME_1%</id>
            <path>%APP_DIR%/%APPLICATION_PATH_1%</path>
            <type>%APP_TYPE_1%</type>
            <target-all-servers>true</target-all-servers>
            <classloading>ISOLATED</classloading>
            <use-fast-deploy>false</use-fast-deploy>
            <keep-generated>false</keep-generated>
            <shared>false</shared>
            <node-java-context>%NODE_JAVA_1%</node-java-context>
        </deployed-application>
-->
	<deployed-application>
            <id>apptest</id>
            <path>/root/app/ROOT.war</path>
            <type>WAR</type>
            <target-all-servers>true</target-all-servers>
            <classloading>ISOLATED</classloading>
            <use-fast-deploy>false</use-fast-deploy>
            <keep-generated>false</keep-generated>
            <shared>false</shared>
            <node-java-context>true</node-java-context>
        </deployed-application>
    </deployed-applications>
    <resources>
	    <data-source>
		    <database>
			    <data-source-id>jdbc/maria</data-source-id>
			    <export-name>jdbc/maria</export-name>
		    	    <!-- data-source-class-name>org.mariadb.jdbc.MariaDbDataSource</data-source-class-name -->
<data-source-class-name>com.mysql.cj.jdbc.MysqlConnectionPoolDataSource</data-source-class-name>
			    <data-source-type>ConnectionPoolDataSource</data-source-type>
			    <vendor>mysql</vendor>
			    <server-name>192.168.16.48</server-name>
			    <port-number>3306</port-number>
			    <database-name>employees</database-name>
			    <user>mtp3</user>
			    <password>mtp3</password>
			    <login-timeout>0</login-timeout>
			    <auto-commit>DRIVER</auto-commit>
			    <stmt-query-timeout>0</stmt-query-timeout>
			    <pool-destroy-timeout>10000</pool-destroy-timeout>
			    <support-xa-emulation>false</support-xa-emulation>
                            </property>
			    <connection-pool>
				    <pooling>
					    <min>5</min>
					    <max>30</max>
					    <step>5</step>
					    <period>3600000</period>
				    </pooling>
				    <wait-free-connection>
					    <enable-wait>false</enable-wait>
					    <wait-time>10000</wait-time>
				    </wait-free-connection>
				    <max-use-count>0</max-use-count>
				    <dba-timeout>-1</dba-timeout>
				    <connection-validation>
					    <check-query>select 1</check-query>
					    <check-query-timeout>0</check-query-timeout>
					    <non-validation-interval>0</non-validation-interval>
					    <check-query-period>0</check-query-period>
					    <check-query-retrial-count>0</check-query-retrial-count>
					    <destroy-policy-on-check-query>FailedConnectionOnly</destroy-policy-on-check-query>
				    </connection-validation>
				    <stmt-caching-size>-1</stmt-caching-size>
				    <stmt-fetch-size>-1</stmt-fetch-size>
				    <connection-trace>
					    <enabled>false</enabled>
					    <get-connection-trace>true</get-connection-trace>
					    <auto-commit-trace>false</auto-commit-trace>
				    </connection-trace>
				    <use-sql-trace>false</use-sql-trace>
				    <keep-connection-handle-open>false</keep-connection-handle-open>
			    </connection-pool>
		    </database>
	    </data-source>
    </resources>
</domain>
